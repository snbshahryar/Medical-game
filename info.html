<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ثبت اطلاعات بازیکن</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Vazirmatn', sans-serif;
    background: #f0f7ff;
    direction: rtl;
    text-align: center;
    padding: 30px;
  }
  h1 {
    color: #0d6efd;
  }
  form {
    background: #fff;
    padding: 25px;
    border-radius: 16px;
    max-width: 400px;
    margin: 0 auto;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-top: 15px;
    text-align: right;
    font-weight: 600;
  }
  input, select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-family: 'Vazirmatn', sans-serif;
  }
  button {
    margin-top: 20px;
    background: #0d6efd;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    font-family: 'Vazirmatn', sans-serif;
  }
  button:hover {
    background: #0b5ed7;
  }
  .success, .error {
    margin-top: 20px;
    font-weight: bold;
  }
  .success { color: green; }
  .error { color: red; }

  @media (max-width: 600px){
    body { padding: 15px; }
    form { padding: 20px; }
    input, select, button { font-size: 15px; }
  }
</style>
</head>
<body>

<h1>فرم ثبت اطلاعات بازیکن</h1>

<form id="infoForm">
  <label>نام و نام خانوادگی:</label>
  <input type="text" name="name" required>

  <label>شماره تلفن:</label>
  <input type="tel" name="phone" required>

  <label>کد نظام پزشکی:</label>
  <input type="text" name="medicalCode" required>

  <label>شغل:</label>
  <select name="job" required>
    <option value="">انتخاب کنید</option>
    <option>پزشک</option>
    <option>داروساز</option>
    <option>پرستار</option>
    <option>سایر</option>
  </select>

  <input type="hidden" name="code" id="uniqueCode">

  <button type="submit">ارسال اطلاعات</button>
  <div id="status"></div>
</form>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxt6_0PNWA6lbm2blAd0HiPMesE0fIiX4GEuRFajG_o4Kcof54cbmXKh7314XS7CoOG/exec";

document.getElementById("uniqueCode").value = localStorage.getItem("tempCode") || "";

const form = document.getElementById("infoForm");
const statusDiv = document.getElementById("status");

form.addEventListener("submit", e => {
  e.preventDefault();
  statusDiv.textContent = "در حال ارسال...";
  statusDiv.className = "";

  const formData = new FormData(form);

  fetch(scriptURL, { method: "POST", body: formData })
    .then(res => {
      if (res.ok) {
        statusDiv.textContent = "✅ اطلاعات با موفقیت ثبت شد!";
        statusDiv.className = "success";
        form.reset();
        localStorage.removeItem("tempCode");
      } else {
        throw new Error("خطا در ارسال داده‌ها");
      }
    })
    .catch(err => {
      statusDiv.textContent = "❌ خطا در ثبت اطلاعات. لطفاً دوباره تلاش کنید.";
      statusDiv.className = "error";
      console.error(err);
    });
});
</script>

</body>
</html>
